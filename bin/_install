#!/bin/bash

# Check if already installed
# ==============================================
if [ -d "/usr/lib/ckan/default/src/ckan" ]; then
	echo 	""
	echo 	"An CKAN installation was found!"
	echo    "Do you want to remove old installation?"
	echo -n "(extensions will not be removed) [y/N] : "
	read V_REMOVE_OLD_INSTALLATION

	if [[ $(echo "$V_REMOVE_OLD_INSTALLATION" | perl -ne 'print lc') == "y" ]]
	then
		echo "Removing /usr/lib/ckan/default/src/ckan directory..."
		rm -R /usr/lib/ckan/default/src/ckan
	else
		echo "Aborting installation!"
		echo ""
		exit
	fi
fi
if [ -f /etc/ckan/default/development.ini ]; then
	echo 	""
	echo 	"An CKAN setting file was found!"
	echo -n "Do you want to remove '/etc/ckan/default/development.ini' ? [y/N] : "
	read V_REMOVE_OLD_SETTING_FILE

	if [[ $(echo "$V_REMOVE_OLD_SETTING_FILE" | perl -ne 'print lc') == "y" ]]
	then
		echo "Removing '/etc/ckan/default/development.ini'..."
		rm /etc/ckan/default/development.ini
	else
		echo "Aborting installation!"
		echo ""
		exit
	fi
fi